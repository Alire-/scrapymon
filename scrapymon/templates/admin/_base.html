{# The bootstrap-theme is removed when default bootstrap theme is used for Flat-UI compatibility. #}

{% extends "admin/base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block head_css %}

    <link href="{{ admin_static.url(filename='bootstrap/bootstrap3/swatch/{swatch}/bootstrap.min.css'.format(swatch=config.get('FLASK_ADMIN_SWATCH', 'default')), v='3.3.5') }}"
          rel="stylesheet">
    <link href="{{ admin_static.url(filename='admin/css/bootstrap3/admin.css', v='1.1.1') }}" rel="stylesheet">

    {% if admin_view.extra_css %}
        {% for css_url in admin_view.extra_css %}
            <link href="{{ css_url }}" rel="stylesheet">
        {% endfor %}
    {% endif %}

    {# Add Flat-UI support. #}
    <link href="{{ url_for('static', filename='flat-ui/css/flat-ui.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='admin/_flatui_compatible.css') }}" rel="stylesheet">

    {# Add custom CSS. #}
    <link href="{{ url_for('static', filename='base.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='admin/_base.css') }}" rel="stylesheet">

    {# Compatable with Flask-Bootstrap. #}
    {% block styles %}{% endblock %}

    {# Add IE fixes. #}
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
    <script src="{{ url_for('static', filename='flat-ui/js/html5shiv.js') }}"></script>
    <script src="{{ url_for('static', filename='flat-ui/js/respond.min.js') }}"></script>
    <![endif]-->

{% endblock %}

{% block page_body %}

    {# Using inversed navbar. #}
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">

        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header navbar-left">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#admin-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            {% block brand %}{{ super() }}{% endblock %}
        </div><!-- /.navbar-header -->

        <!-- navbar content -->
        <div class="collapse navbar-collapse" id="admin-navbar-collapse">
            {% block main_menu %}{{ super() }}{% endblock %}

            {% block menu_links %}{{ super() }}{% endblock %}

            {# Add authentication menu. #}
            {% block access_control %}{% include "admin/_menu.html" %}{% endblock %}
        </div>
    </nav><!-- /navbar -->

    {# Using fluid container instead default container. #}
    <div class="container-fluid">
        {% block messages %}{{ super() }}{% endblock %}

        {# store the jinja2 context for form_rules rendering logic #}
        {% set render_ctx = h.resolve_ctx() %}

        {# Compatible with Flask-Bootstrap. #}
        {% block body %}{% block content %}{% endblock %}{% endblock %}
    </div>
{% endblock %}

{% block tail_js %}

    {# Remove default select2.js and original bootstrap JS for Flat-UI compatiblity. #}
    <script src="{{ admin_static.url(filename='vendor/jquery.min.js', v='2.1.4') }}" type="text/javascript"></script>
    <script src="{{ admin_static.url(filename='vendor/moment.min.js', v='2.9.0') }}" type="text/javascript"></script>

    {% if admin_view.extra_js %}
        {% for js_url in admin_view.extra_js %}
            <script src="{{ js_url }}" type="text/javascript"></script>
        {% endfor %}
    {% endif %}

    <script src="{{ url_for('static', filename='flat-ui/js/flat-ui.min.js') }}"></script>
    <script src="{{ url_for('static', filename='flat-ui/js/prettify.js') }}"></script>
    <script src="{{ url_for('static', filename='flat-ui/js/application.js') }}"></script>

    {# Initialize tooltip and hide tooltip for compatibility with application.js. #}
            <script type="text/javascript">
                $(document).ready(function () {
                    $('[data-toggle="tooltip"]').tooltip();
                    $('[data-toggle=tooltip]').tooltip('hide');
                });
            </script>
{% endblock %}
