<div>
    {% if not current_user.is_authenticated %}

        {% if not request.path == url_for_security('login') %}
            <a class="login-link" href="{{ url_for_security('login') }}{% if 'next' in request.args %}?next={{ request.args.next|urlencode }}{% endif %}">Login</a>
        {% endif %}

        {% if request.path == url_for_security('login') or (security.registerable and request.path == url_for_security('register')) %}
            {% if security.registerable and not request.path == url_for_security('register') %}
                <a class="login-link" href="{{ url_for_security('register') }}{% if 'next' in request.args %}?next={{ request.args.next|urlencode }}{% endif %}">Register</a>
            {% endif %}

            {% if security.recoverable and not request.path == url_for_security('forgot_password') %}
                <a class="login-link" href="{{ url_for_security('forgot_password') }}">Forgot password?</a>
            {% endif %}

            {% if security.registerable and request.path == url_for_security('register') and security.confirmable %}
                <a class="login-link" href="{{ url_for_security('send_confirmation') }}">Not received confirmation email?</a>
            {% endif %}
        {% endif %}
    {% else %}

        <a class="login-link" href="{{ url_for_security('logout') }}">Logout</a>

        {% if security.changeabal and not request.path == url_for_security('change_password') %}
            <a class="login-link" href="{{ url_for_security('change_password') }}">Change password</a>
        {% endif %}
    {% endif %}
</div>
